#1.代码目录结构

```cpp
//与事务管理和并发控制相关的文件目录结构
storage\innobase
├─btr      //B+树索引结构，锁对象施加在索引项上面，而不是直接施加在记录/元组上面
│	   btr0btr.cc  //索引管理，索引的创建、释放等相关操作
│      btr0bulk.cc //索引上数据的批量操作
│      btr0cur.cc  //索引树上遍历对row进行修改等相关的辅助操作
│      btr0pcur.cc //持久游标，上层访问索引树的结构。SQL语句中（select、update和delete）
       //对索引树的遍历条件所得到的一些固定属性从而决定索引树的遍历方法
│      btr0sea.cc  //索引树上的查找操作
├─data     //物理存储结构：字段和记录
│      data0data.cc  //字段和元组级的一些操作
│      data0type.cc  //数据类型的判断
...
├─handler  //继承MySQL的handler层
│      handler0alter.cc //ALTER TABLE接口
│      ha_innodb.cc//InnoDB作为一个插件对接MySQL Server的接口层，里面定义了诸如
        //innobase_commit()和事务相关的接口
│      ha_innodb.h
...
├─lock     //存放InnoDB的锁操作相关文件，并发控制的核心
│      lock0iter.cc  //锁的队列管理，初始化锁的队列和获得锁队列中的锁
│      lock0lock.cc  //锁的管理，包括锁的授予、回收、死锁检测等操作，是锁操作相关的最主要的文件
│      lock0prdt.cc  //谓词锁相关操作，用以实现空间索引的Next-Key locking算法
│      lock0wait.cc  //锁等待相关的操作，包括因锁等待而挂起、释放、检查等操作
│
├─log      //日志管理
│      log0log.cc   //REDO日志，通过Mini-transaction的mtr_commit()把日志信息写到REDO
                      //日志文件中
│      log0recv.cc  //恢复操作
...
│
├─mtr      //Mini-transaction（事务的重要子部分）处理(另外，在include目录里还有
              //mtr0mtr.ic这样的文件提供了与锁相关的一些基本操作)
│      mtr0log.cc   //Mini-transaction写日志部分
│      mtr0mtr.cc   //Mini-transaction日志首先要刷到日志缓冲，然后可把日志缓冲中的数据顺
                      //序刷出到物理存储，节约了IO操作
...
├─page     //物理页面操作
│      page0cur.cc  //在物理页面上的遍历操作（插入、删除）
│      page0page.cc //索引的叶子节点相关操作。索引只是一棵树，叶子是物理数据
│      page0zip.cc  //页面压缩的相关操作
...
│
├─que      //Query graph
│      que0que.cc  //查询图（query graph）算法的实现，用以判断是否有环存在。在事务管理中
                     //用以跟踪事务的执行过程
│
├─read     //Cursor read，一致性无锁读
│      read0read.cc  //MVCC机制实现的主要代码，用快照隔离技术（InnoDB中称为ReadView）实
                       //现一致性无锁读操作
...
├─sync     //同步操作相关内容
│      sync0arr.cc   //The wait array used in synchronization primitives
│      sync0debug.cc //Debug checks for latches
│      sync0rw.cc    //用于线程间同步的读写锁
│      sync0sync.cc  //Mutex, the basic synchronization primitive
├─trx      //事务管理相关操作，事务管理机制的核心
│      trx0i_s.cc    //INFORMATION SCHEMA里与事务和锁关联的系统表的相关操作：innodb_
                       //trx、innodb_locks、innodb_lock_waits
│      trx0purge.cc  //PURGE操作，用于清理旧版本数据
│      trx0rec.cc    //UNDO日志相关的操作，侧重于UODO日志中使用到的page和record等相关的操作
│      trx0roll.cc   //事务回滚操作相关的内容
│      trx0rseg.cc   //回滚段的管理，包括创建、初始化、使用、释放等，rseg的意思是rollback segment
│      trx0sys.cc    //事务管理在系统层面的一些相关操作，如事务系统的启动、关闭等
│trx0trx.cc    //事务管理相关的内容，如事务开始、事务提交、事务信息打印输出等动作
│trx0undo.cc   //UNDO日志相关的操作，侧重于UNDO日志管理方面
...
├─row      //row的各种相关操作
...
│      row0log.cc    // Modification log for online index creation and online table rebuild
...
│      row0row.cc    //row相关的操作，如创建、格式化等（把不同数据类型的数据变成元组）
...
│      row0undo.cc   //INSERT/DELETE/UPDATE操作的逆向操作，即回滚时需要执行的操作
```