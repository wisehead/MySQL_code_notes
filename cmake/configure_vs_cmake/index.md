---
title: mysql Cmake - bodhicitta - 博客园
category: default
tags: 
  - www.cnblogs.com
created_at: 2020-05-19 18:34:59
original_url: https://www.cnblogs.com/examine/p/4612799.html
---


# mysql Cmake - bodhicitta - 博客园

MySQL CMake参数说明手册

时间:2012-06-12 18:13来源:三知开发网 作者:许亮 责任编辑:许亮 点击: 1678 次

MySQL自5.5版本以后，就开始使用CMake编译工具了，因此，你在安装源文件中找不到configure文件是正常的。很多人下到了新版的MySQL，因为找不到configure文件，不知道该怎么继续下去

<table style="width: 100%;" border="0" cellpadding="0"><tbody><tr><td width="712"><p align="left">MySQL自5.5版本以后，就开始使用CMake编译工具了，因此，你在安装源文件中找不到configure文件是正常的。很多人下到了新版的MySQL，因为找不到configure文件，不知道该怎么继续下去。有没有一篇可供参考的文章呢？其实在<a href="http://forge.mysql.com/" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">http://forge.mysql.com</a>网站上有一篇文章，专门介绍了如何用CMake工具进行新版MySQL的编译安装。</p><p align="left">原文地址为：<a href="http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">http://forge.mysql.com/wiki/Autotools_to_CMake_Transition_Guide</a>。</p><p align="left"><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Introduction" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">1、介绍</a><br><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Command_Invocation_Syntax" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">2、命令调用语法</a><br><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Installation_Layout_Options" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">3、安装参数选项</a><br><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Storage_Engine_Options" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">4、存储引擎选项</a><br><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Library_Options" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">5、库文件加载选项</a><br><a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html#Miscellaneous_Options" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">6、其他选项</a></p><p align="left"><strong>介绍</strong></p><p align="left">本页将介绍常用编译工具的一些配置选项和这些配置选项在CMake中又是如何进行配置的，然后介绍如何使用CMake工具来构建编译MySQL。</p><p align="left"><strong>命令调用语法</strong></p><p align="left">下表列出了常用编译工具的调用语法和等效的CMake命令。“.”表示你当前的工作目录路径，请根据你所在的目录，适当的替换掉路径“.”。</p><table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td width="712"><p align="center">configure命令</p></td><td width="712"><p align="center">CMake命令</p></td></tr><tr><td width="712"><p align="left">./configure</p></td><td width="712"><p align="left">cmake .</p></td></tr><tr><td width="712"><p align="left">./configure --help</p></td><td width="712"><p align="left">cmake . -LH or ccmake .</p></td></tr></tbody></table><p align="left">在重新配置或重新构建之前，需要先清除旧的对象文件和缓存信息，方法如下：</p><p align="left">Autotools：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>make&nbsp;clean&nbsp;</li><li>rm&nbsp;config.cache&nbsp;</li></ol><p align="left">CMake (Unix/Linux)：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>make&nbsp;clean&nbsp;</li><li>rm&nbsp;CMakeCache.txt&nbsp;</li></ol><p align="left">CMake (Windows)：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>devenv&nbsp;MySQL.sln&nbsp;/clean&nbsp;</li><li>del&nbsp;CMakeCache.txt&nbsp;</li></ol><p align="left"><strong>安装参数选项</strong></p><p align="left">在下表中，“CMAKE_INSTALL_PREFIX”的值表示的是安装根目录，其他参数值的路径都是相对于根目录的，当然你也可以直接使用绝对路径，具体如下：</p><table style="width: 100%;" border="1" cellspacing="0" cellpadding="0"><thead><tr><td width="712"><p align="left"><strong>参数值说明</strong></p></td><td width="712"><p align="left"><strong>配置选项</strong></p></td><td width="712"><p align="left"><strong>CMak</strong><strong>选项</strong></p></td></tr></thead><tbody><tr><td width="712"><p align="left">安装根目录</p></td><td width="712"><p align="left">--prefix=/usr</p></td><td width="712"><p align="left">-DCMAKE_INSTALL_PREFIX=/usr</p></td></tr><tr><td width="712"><p align="left">mysqld目录</p></td><td width="712"><p align="left">--libexecdir=/usr/sbin</p></td><td width="712"><p align="left">-DINSTALL_SBINDIR=sbin</p></td></tr><tr><td width="712"><p align="left">数据存储目录</p></td><td width="712"><p align="left">--localstatedir=/var/lib/mysql</p></td><td width="712"><p align="left">-DMYSQL_DATADIR=/var/lib/mysql</p></td></tr><tr><td width="712"><p align="left">配置文件(my.cnf)目录</p></td><td width="712"><p align="left">--sysconfdir=/etc/mysql</p></td><td width="712"><p align="left">-DSYSCONFDIR=/etc/mysql</p></td></tr><tr><td width="712"><p align="left">插件目录</p></td><td width="712"><p align="left">--with-plugindir=/usr/lib64/mysql/plugin</p></td><td width="712"><p align="left">-DINSTALL_PLUGINDIR=lib64/mysql/plugin</p></td></tr><tr><td width="712"><p align="left">手册文件目录</p></td><td width="712"><p align="left">--mandir=/usr/share/man</p></td><td width="712"><p align="left">-DINSTALL_MANDIR=share/man</p></td></tr><tr><td width="712"><p align="left">共享数据目录</p></td><td width="712"><p align="left">--sharedstatedir=/usr/share/mysql</p></td><td width="712"><p align="left">-DINSTALL_SHAREDIR=share</p></td></tr><tr><td width="712"><p align="left">Library库目录</p></td><td width="712"><p align="left">--libdir=/usr/lib64/mysql</p></td><td width="712"><p align="left">-DINSTALL_LIBDIR=lib64/mysql</p></td></tr><tr><td width="712"><p align="left">Header安装目录</p></td><td width="712"><p align="left">--includedir=/usr/include/mysql</p></td><td width="712"><p align="left">-DINSTALL_INCLUDEDIR=include/mysql</p></td></tr><tr><td width="712"><p align="left">信息文档目录</p></td><td width="712"><p align="left">--infodir=/usr/share/info</p></td><td width="712"><p align="left">-DINSTALL_INFODIR=share/info</p></td></tr></tbody></table><p align="left"><strong>存储引擎选项</strong></p><p align="left">存储引擎是以插件的形式存在的，所以，该选项可以控制插件的构建，比如指定使用某个特定的引擎。</p><p align="left">--with-plugins配置选项接受两种形式的参数值，它没有对应的CMake配置参数：</p><p align="left">① 以逗号(,)分隔的引擎名称列表；</p><p align="left">② a "group name" value that is shorthand for a set of engines</p><p align="left">在CMake中，引擎被作为单个的选项来进行控制。假设有以下配置选项：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>--with-plugins=csv,myisam,myisammrg,heap,innobase,archive,blackhole&nbsp;&nbsp;</li></ol><p align="left">上面的参数指定MySQL数据库可以支持哪些数据库引擎，将上述编译选项转换成CMake编译选项时，下面的几个引擎名字可以被省略，因为编译时，默认就支持：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>csv&nbsp;myisam&nbsp;myisammrg&nbsp;heap&nbsp;</li></ol><p align="left">然后使用下面的编译参数，以启用InnoDB、ARCHIVE和BLACKHOLE引擎支持：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>-DWITH_INNOBASE_STORAGE_ENGINE=1&nbsp;</li><li>-DWITH_ARCHIVE_STORAGE_ENGINE=1&nbsp;</li><li>-DWITH_BLACKHOLE_STORAGE_ENGINE=1&nbsp;</li></ol><p align="left">当然也可以使用“ON”来替代数字1，它们是等效的。</p><p align="left">如果你想除去对某种引擎的支持，则在CMake编译选项中使用-DWITHOUT_&lt;ENGINE&gt;_STORAGE_ENGINE，例如：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>-DWITHOUT_EXAMPLE_STORAGE_ENGINE=1&nbsp;</li><li>-DWITHOUT_FEDERATED_STORAGE_ENGINE=1&nbsp;</li><li>-DWITHOUT_PARTITION_STORAGE_ENGINE=1&nbsp;</li></ol><p align="left"><strong>库文件加载选项</strong></p><p align="left">该选项指明Mysql使用库的情况：</p><table style="width: 100%;" border="1" cellspacing="0" cellpadding="0"><thead><tr><td width="712"><p align="left"><strong>参数值说明</strong></p></td><td width="712"><p align="left"><strong>配置选项</strong></p></td><td width="712"><p align="left"><strong>CMak</strong><strong>选项</strong></p></td></tr></thead><tbody><tr><td width="712"><p align="left">readline库</p></td><td width="712"><p align="left">--with-readline</p></td><td width="712"><p align="left">-DWITH_READLINE=1</p></td></tr><tr><td width="712"><p align="left">SSL库</p></td><td width="712"><p align="left">--with-ssl=/usr</p></td><td width="712"><p align="left">-DWITH_SSL=system</p></td></tr><tr><td width="712"><p align="left">zlib库</p></td><td width="712"><p align="left">--with-zlib-dir=/usr</p></td><td width="712"><p align="left">-DWITH_ZLIB=system</p></td></tr><tr><td width="712"><p align="left">libwrap库</p></td><td width="712"><p align="left">--without-libwrap</p></td><td width="712"><p align="left">-DWITH_LIBWRAP=0</p></td></tr></tbody></table><p align="left"><strong>其他选项</strong></p><p align="left">CMake编译选项支持大部分之前版本的MySQL编译选项，新老编译选项的差别在于：之前的是小写，现在全部变成了大写，之前采用双横线，现在使用单横线，之前使用的破折号，现在取而代之的是使用下划线，例如：</p><p align="left">view plain&nbsp;&nbsp;&nbsp;<a href="http://www.sunchis.com/html/db/mysql/2012/0612/419.html" target="_blank" referrerpolicy="no-referrer" rel="noopener noreferrer">copy</a></p><ol><li>--with-debug&nbsp;=<strong>&gt;</strong>&nbsp;WITH_DEBUG=1&nbsp;</li><li>--with-embedded-server&nbsp;=<strong>&gt;</strong>&nbsp;WITH_EMBEDDED_SERVER&nbsp;</li></ol><p align="left">下面是编译MySQL的新老参数对照表：</p><table style="width: 100%;" border="1" cellspacing="0" cellpadding="0"><thead><tr><td width="712"><p align="left"><strong>参数值说明</strong></p></td><td width="712"><p align="left"><strong>配置选项</strong></p></td><td width="712"><p align="left"><strong>CMak</strong><strong>选项</strong></p></td></tr></thead><tbody><tr><td width="712"><p align="left">TCP/IP端口</p></td><td width="712"><p align="left">--with-tcp-port-=3306</p></td><td width="712"><p align="left">-DMYSQL_TCP_PORT=3306</p></td></tr><tr><td width="712"><p align="left">UNIX socket文件</p></td><td width="712"><p align="left">--with-unix-socket-path=/tmp/mysqld.sock</p></td><td width="712"><p align="left">-DMYSQL_UNIX_ADDR=/tmp/mysqld.sock</p></td></tr><tr><td width="712"><p align="left">启用加载本地数据</p></td><td width="712"><p align="left">--enable-local-infile</p></td><td width="712"><p align="left">-DENABLED_LOCAL_INFILE=1</p></td></tr><tr><td width="712"><p align="left">扩展字符支持</p></td><td width="712"><p align="left">--with-extra-charsets=all（默认：all）</p></td><td width="712"><p align="left">-DEXTRA_CHARSETS=all（默认：all）</p></td></tr><tr><td width="712"><p align="left">默认字符集</p></td><td width="712"><p align="left">--with-charset=utf8</p></td><td width="712"><p align="left">-DDEFAULT_CHARSET=utf8</p></td></tr><tr><td width="712"><p align="left">默认字符校对</p></td><td width="712"><p align="left">--with-collation=utf8_general_ci</p></td><td width="712"><p align="left">-DDEFAULT_COLLATION=utf8_general_ci</p></td></tr><tr><td width="712"><p align="left">Build the server</p></td><td width="712"><p align="left">--with-server</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">嵌入式服务器</p></td><td width="712"><p align="left">--with-embedded-server</p></td><td width="712"><p align="left">-DWITH_EMBEDDED_SERVER=1</p></td></tr><tr><td width="712"><p align="left">libmysqld权限控制</p></td><td width="712"><p align="left">--with-embedded-privilege-control</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">安装文档</p></td><td width="712"><p align="left">--without-docs</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">Big tables支持</p></td><td width="712"><p align="left">--with-big-tables, --without-big-tables</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">mysqld运行用户</p></td><td width="712"><p align="left">--with-mysqld-user=mysql</p></td><td width="712"><p align="left">-DMYSQL_USER=mysql</p></td></tr><tr><td width="712"><p align="left">调试模式</p></td><td width="712"><p align="left">--without-debug（默认禁用）</p></td><td width="712"><p align="left">-DWITH_DEBUG=0（默认禁用）</p></td></tr><tr><td width="712"><p align="left">GIS支持</p></td><td width="712"><p align="left">--with-geometry</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">社区功能</p></td><td width="712"><p align="left">--enable-community-features</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">Profiling</p></td><td width="712"><p align="left">--disable-profiling（默认启用）</p></td><td width="712"><p align="left">-DENABLE_PROFILING=0（默认启用）</p></td></tr><tr><td width="712"><p align="left">pstack</p></td><td width="712"><p align="left">--without-pstack</p></td><td width="712"><p align="left">无（新版移除该功能）</p></td></tr><tr><td width="712"><p align="left">汇编字符串函数</p></td><td width="712"><p align="left">--enable-assembler</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">构建类型</p></td><td width="712"><p align="left">--build=x86_64-pc-linux-gnu</p></td><td width="712"><p align="left">没有等效参数</p></td></tr><tr><td width="712"><p align="left">交叉编译主机</p></td><td width="712"><p align="left">--host=x86_64-pc-linux-gnu</p></td><td width="712"><p align="left">没有等效参数</p></td></tr><tr><td width="712"><p align="left">客户端标志</p></td><td width="712"><p align="left">--with-client-ldflags=-lstdc++</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">线程安全标志</p></td><td width="712"><p align="left">--enable-thread-safe-client</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">注释存储类型</p></td><td width="712"><p align="left">--with-comment='string'</p></td><td width="712"><p align="left">-DWITH_COMMENT='string'</p></td></tr><tr><td width="712"><p align="left">Shared/static binaries</p></td><td width="712"><p align="left">--enable-shared --enable-static</p></td><td width="712"><p align="left">无</p></td></tr><tr><td width="712"><p align="left">内存使用控制</p></td><td width="712"><p align="left">--with-low-memory</p></td><td width="712"><p align="left">无</p></td></tr></tbody></table></td></tr></tbody></table>

---------------------------------------------------


原网址: [访问](https://www.cnblogs.com/examine/p/4612799.html)

创建于: 2020-05-19 18:34:59

目录: default

标签: `www.cnblogs.com`

